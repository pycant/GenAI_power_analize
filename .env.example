# GenAI模型能效评级体系 - 环境配置模板
# 复制此文件为 .env 并填写实际配置值

# =============================================================================
# 基础配置
# =============================================================================

# 应用环境
development
ENVIRONMENT=development

# 调试模式
debug
DEBUG=true

# 应用密钥 - 用于会话加密等 (生成强随机字符串)
APP_SECRET_KEY=your-super-secret-key-here-change-this-in-production

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL数据库配置
DATABASE_URL=postgresql://username:password@localhost:5432/genai_power_eval
DB_HOST=localhost
DB_PORT=5432
DB_NAME=genai_power_eval
DB_USERNAME=your_db_username
DB_PASSWORD=your_db_password

# Redis缓存配置 (可选)
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# =============================================================================
# Supabase配置 (如果使用Supabase)
# =============================================================================

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key
SUPABASE_JWT_SECRET=your-jwt-secret

# =============================================================================
# API配置
# =============================================================================

# API基础URL
API_BASE_URL=http://localhost:8000
API_VERSION=v1

# API密钥管理
API_KEY_HEADER=X-API-Key
API_RATE_LIMIT=1000
API_RATE_LIMIT_PERIOD=3600

# JWT配置
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=7

# =============================================================================
# 外部服务配置
# =============================================================================

# Hugging Face API (用于模型下载)
HUGGING_FACE_API_TOKEN=your-hf-token
HUGGING_FACE_CACHE_DIR=./cache/huggingface

# OpenAI API (可选，用于对比评估)
OPENAI_API_KEY=your-openai-api-key
OPENAI_ORGANIZATION=your-org-id

# Anthropic API (可选，用于对比评估)
ANTHROPIC_API_KEY=your-anthropic-api-key

# Google Cloud API (可选，用于云资源)
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json

# AWS配置 (可选，用于云资源)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-west-2
AWS_S3_BUCKET=your-s3-bucket

# =============================================================================
# 模型评估配置
# =============================================================================

# 模型缓存目录
MODEL_CACHE_DIR=./cache/models
MODEL_DOWNLOAD_TIMEOUT=3600

# 评估任务配置
MAX_EVALUATION_TASKS=10
EVALUATION_TIMEOUT_SECONDS=7200
EVALUATION_MEMORY_LIMIT_GB=16

# 批量评估配置
BATCH_EVALUATION_SIZE=100
BATCH_EVALUATION_INTERVAL=60

# =============================================================================
# 文件存储配置
# =============================================================================

# 上传文件配置
UPLOAD_MAX_FILE_SIZE=104857600  # 100MB
UPLOAD_ALLOWED_EXTENSIONS=json,csv,pkl,joblib,pt,pth,h5,pb,onnx
UPLOAD_BASE_PATH=./uploads

# 结果文件配置
RESULTS_BASE_PATH=./results
RESULTS_RETENTION_DAYS=90

# 日志文件配置
LOG_FILE_PATH=./logs
LOG_LEVEL=INFO
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# =============================================================================
# 监控和告警配置
# =============================================================================

# 监控配置
ENABLE_MONITORING=true
METRICS_COLLECTION_INTERVAL=60
HEALTH_CHECK_INTERVAL=30

# 告警配置
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_SERVER=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=your-email@gmail.com
ALERT_EMAIL_PASSWORD=your-email-password
ALERT_EMAIL_TO=admin@your-domain.com

# Slack告警 (可选)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts

# =============================================================================
# 安全配置
# =============================================================================

# CORS配置
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# CSRF保护
CSRF_SECRET_KEY=your-csrf-secret-key
CSRF_TOKEN_EXPIRATION=3600

# 安全头配置
SECURITY_HEADERS_ENABLED=true
SECURITY_HEADERS_HSTS_MAX_AGE=31536000
SECURITY_HEADERS_FRAME_OPTIONS=DENY
SECURITY_HEADERS_CONTENT_TYPE_OPTIONS=nosniff

# 密码安全
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# =============================================================================
# 性能配置
# =============================================================================

# 连接池配置
DATABASE_POOL_SIZE=20
DATABASE_POOL_MAX_OVERFLOW=40
DATABASE_POOL_TIMEOUT=30

# 缓存配置
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=3600
CACHE_KEY_PREFIX=genai_power

# 异步任务配置
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC

# Gunicorn配置 (生产环境)
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
GUNICORN_BIND=0.0.0.0:8000
GUNICORN_TIMEOUT=120

# =============================================================================
# 机器学习配置
# =============================================================================

# GPU配置
CUDA_VISIBLE_DEVICES=0,1
GPU_MEMORY_LIMIT=8192
GPU_ALLOW_GROWTH=true

# 模型服务配置
MODEL_SERVING_TIMEOUT=300
MODEL_SERVING_MAX_BATCH_SIZE=32
MODEL_SERVING_BATCH_TIMEOUT=10

# 分布式训练 (可选)
DISTRIBUTED_TRAINING_ENABLED=false
DISTRIBUTED_TRAINING_BACKEND=nccl
DISTRIBUTED_TRAINING_INIT_METHOD=env://

# =============================================================================
# 实验配置
# =============================================================================

# 实验跟踪
EXPERIMENT_TRACKING_ENABLED=true
EXPERIMENT_TRACKING_BACKEND=mlflow
EXPERIMENT_TRACKING_URI=http://localhost:5000
EXPERIMENT_NAME=genai_power_evaluation

# 权重和偏置 (W&B)
WANDB_PROJECT=genai-power-evaluation
WANDB_ENTITY=your-team
WANDB_API_KEY=your-wandb-api-key
WANDB_MODE=online

# =============================================================================
# 前端配置
# =============================================================================

# 前端构建配置
FRONTEND_BUILD_DIR=./frontend/dist
FRONTEND_PUBLIC_PATH=/
FRONTEND_OUTPUT_DIR=./static

# 前端环境变量
VITE_API_BASE_URL=http://localhost:8000/api
VITE_APP_TITLE=GenAI模型能效评级体系
VITE_APP_DESCRIPTION=基于多维效质比的AI模型评估平台

# =============================================================================
# 部署配置
# =============================================================================

# Docker配置
DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_NAME=genai-power-evaluation
DOCKER_IMAGE_TAG=latest

# Kubernetes配置
KUBERNETES_NAMESPACE=genai-power
KUBERNETES_SERVICE_NAME=genai-power-service
KUBERNETES_INGRESS_HOST=genai-power.your-domain.com

# 域名配置
DOMAIN_NAME=genai-power.your-domain.com
SSL_CERT_PATH=/etc/ssl/certs/genai-power.crt
SSL_KEY_PATH=/etc/ssl/private/genai-power.key

# =============================================================================
# 开发环境特定配置
# =============================================================================

# 开发模式
DEV_MODE=true
DEBUG_TOOLBAR=true
HOT_RELOAD=true

# 开发工具
PROFILING_ENABLED=false
SQL_ECHO=false
SQL_DEBUG=false

# 模拟数据
USE_MOCK_DATA=false
MOCK_DATA_COUNT=1000

# =============================================================================
# 测试配置
# =============================================================================

# 测试数据库
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/genai_power_test
TEST_DB_NAME=genai_power_test

# 测试配置
PYTEST_TIMEOUT=300
PYTEST_VERBOSE=true
PYTEST_COVERAGE_MIN=85

# 端到端测试
E2E_TEST_BASE_URL=http://localhost:3000
E2E_TEST_TIMEOUT=30000
E2E_TEST_HEADLESS=true

# =============================================================================
# 本地开发覆盖配置
# =============================================================================

# 这些配置可以覆盖上面的默认配置，用于本地开发
# 将此部分复制到 .env.local 文件中进行本地配置

# 本地数据库 (使用SQLite简化开发)
# DATABASE_URL=sqlite:///./local.db
# DB_HOST=
# DB_PORT=
# DB_NAME=local.db
# DB_USERNAME=
# DB_PASSWORD=

# 禁用某些功能加速开发
# ENABLE_MONITORING=false
# EXPERIMENT_TRACKING_ENABLED=false
# CELERY_TASK_ALWAYS_EAGER=true

# 使用内存缓存
# CACHE_TYPE=simple
# REDIS_URL=

# 简化日志
# LOG_LEVEL=DEBUG
# LOG_FILE_PATH=

# 本地文件存储
# UPLOAD_BASE_PATH=./local_uploads
# RESULTS_BASE_PATH=./local_results
# MODEL_CACHE_DIR=./local_cache